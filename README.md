# 2021gsc_YosukeKanda
## 2021年度 ゼミ論用レポジトリ

青山学院大学 地球社会共生学部 地球社会共生学科

神田 洋輔/Yosuke Kanda

学籍番号 1A118061

指導教員 古橋 大地 教授

© Furuhashi Laboratory/Yosuke Kanda, CC BY 4.0

# 「一都三県（市区町村別）空き家率マップ」の作成
# Abstract
本研究は、一都三県(東京都・神奈川県・千葉県・埼玉県）の市区町村単位の空き家率を総務省統計局の住宅・土地統計調査より個別に算出し、そのデータをもとにしてデジタルマップ上に視覚化したものである。

# 全体構成（IMRAD形式）

# Introduction
#### 【空き家率マップの作成に取り組んだ経緯と目的】

「空間情報やデジタルマップを通じて、その問題の解決に貢献できそうな社会問題はないか」というブレインストーミングの結果、今回は空き家率という社会問題に焦点を当ててマップを作成する経緯となった。
　少子高齢化や地方における人口減少の加速、経済活動と産業構造の変化などの要因により、全国での空き家率は年々増加傾向にある。  日本の空き家は過去10年間に渡って増加し続けており、2033年には国内の空き家
率は現在の2倍弱の約25%になる可能性があるとされている。普段なかなか実感する機会がないが、年々深刻化している空き家増加という社会問題について、人々がその結果もたらされる悪影響について認識し、また空き家の存在をより身近に知ることでその利活用につながるきっかけになるようにという目的からこのマップの作成に取り組んだ。


#### 【空き家の増加によって想定される問題と現状】


[国土交通省　空き家等の現状について](https://www.mlit.go.jp/common/001172930.pdf)によると、管理不全な空き家等により想定される問題には以下のようなものが挙げられる。


>* 防災性の低下
>
  >   倒壊、崩壊、屋根・外壁の落下
>
>* 火災発生のおそれ
>
>* 防犯性の低下
>
  >   犯罪の誘発
>
>* ごみの不法投棄
>
>* 衛生の悪化、悪臭の発生
>
  >   蚊、蝿、ねずみ、野良猫の発生、集中
>
>* 風景、景観の悪化
>
>* その他
>
  >   樹枝の越境、雑草の繁茂、落ち葉の飛散 等"
 










# Methods


**【アクションアイテム】**
  * 機能要件と必要タスクの整理
     * タイムスライダーで年ごとの空き家率を表示
     * 集計年ごとのデータ（CSV）を用意
     * Exampleコードを参考に実装
     * 市区町村レベルの境界線データによる塗りつぶし
     * 境界線データとCSVデータの結合
     * クリック時に特定の市区町村の詳細データを表示
     * どんな項目を表示するのか検討

* データ成形
  * 市区町村レベルのデータを見つける
  * データのモデル（どのような項目が必要か ex.市区町村名や概要文）をスプレッドシート上で整理
  * 総務省のデータをもとにCSV形式でデータを成形する
  * 境界線データとCSVデータの結合

* マップ＆UIデザイン
  * 結合したデータのStudioへの取り込み
  * Mapbox Studioでマップのデザイン
  
* 配色（どのデータ範囲でどの色を表示するのか）
  * カラーパレット：Arid
  * データ範囲：以下範囲で区切り
>10%未満 
>
>10%以上15%未満
>
>15%以上20%未満
>
>20%以上25%未満
>
>25%以上

* 実装
  * 表示
    コロプレスによる塗りつぶし

# Result and Discussion

#### 【データ成形】

e-Stat (政府統計ポータルサイト）から[住宅・土地統計調査](https://www.e-stat.go.jp/stat-search/files?page=1&toukei=00200522)にアクセスして、
平成10〜30年の期間の住宅・土地統計調査のデータをもとにして、「居住世帯の有無(8区分)別住宅数及び住宅以外で人が居住する建物数―全国、都道府県、市区町村」の統計表から、
それぞれの年度ごとに各都県の地区町村別の空き家率を割り出した。

空き家率の算出方法：
**空き家率＝居住世帯なしの空き家 ÷（居住世帯なしの空き家+居住世帯あり総数）×100）**


その後、スプレッドシートに必要なデータのみを抽出して、CSVをファイル作成[（市区町村別空き家率CSVデータ）](https://docs.google.com/spreadsheets/d/1DNB93PVvr5xw9WmrPg9wmr08sY0VogtQ/edit?usp=sharing&ouid=108455521641861516558&rtpof=true&sd=true)

<img width="1325" alt="スクリーンショット 2022-02-04 17 28 58" src="https://user-images.githubusercontent.com/62165727/152496501-d4fa90f9-5a7d-4416-9340-634b1a96e01f.png">

↑各年度ごとにoccupied（居住世帯あり総数）,unoccupied（居住世帯なしの空き家）,vancancy-rate（空き家率）,rank（空き家率順位）の４項目で列を作成。


#### 【境界線データとCSVデータの結合】 

上記のCSVのデータをGeoJSONに書き換える。その際に境界線データと一緒に書き換えてタイルセットに書き換える。

#### 【結合したデータをMapbox Studioに取り込み】

スタイルはテンプレートから「Basic」を選択して、Componentsは今回のマップの目的に応じて最低限に削った。  
スタイルURL：[mapbox://styles/cancancanda/ckx5muc1z78db14pgh7sxerq4](url)

#### 【Mapbox Studio上でのUIデザイン】

<img width="1336" alt="スクリーンショット 2022-02-04 19 22 00" src="https://user-images.githubusercontent.com/62165727/152512650-eee8f2ec-176c-4f44-956e-8c97bea45584.png">


新しいコンポーネントを追加して、データビジュアライゼーションはコロプレスを選択。各年度の空き家率データに従った塗りつぶしをする。

<img width="686" alt="スクリーンショット 2022-02-04 18 25 17" src="https://user-images.githubusercontent.com/62165727/152504503-4635886d-dc6c-4e84-b54b-e2dd72c53046.png">

* 配色（どのデータ範囲でどの色を表示するのか）
  * カラーパレット：Arid
  * データ範囲：以下範囲で区切り
>10%未満 
>
>10%以上15%未満
>
>15%以上20%未満
>
>20%以上25%未満
>
>25%以上

#### 【クリック時の挙動】

完成形の理想とするUIは日経新聞社がMapbox Studio上で作成している「ふるさとクリック」シリーズのフロントデザインだったが、中身を確認すると日経独自のCSSの実装となっていて、これをそのまま参考にすると問題であると判断し実装のレベルを下げて、[Mapbox GL JSのドキュメント](https://docs.mapbox.com/jp/mapbox-gl-js/example/)から実装できそうなやり方を選択してデザインしていく方針にした。

<img width="1512" alt="スクリーンショット 2022-02-04 18 05 00" src="https://user-images.githubusercontent.com/62165727/152501645-a1f9fdfd-be44-4bfa-b5d6-39ee58d511c0.png">

↑「ふるさとクリック」シリーズに共通するフロントUI（クリック時の各都道府県名+市区町村の表示、率とグラフでの推移の表示、都道府県ランキングの表示）

#### 【Mapbox GL JSによる代替案】

当初の目標と比較するとかなり簡易的なデザインにはなるが、クリックの挙動はMapbox GL JS Eaxmpleの[「クリック時にポリゴン情報を表示」](https://docs.mapbox.com/jp/mapbox-gl-js/example/polygon-popup-on-click/)　を参考にして、ポップアップ形式で元データから値を呼び出して表示する形式にした。
表示内容は市区町村名と都県内での空き家率順位、空き家率  

<img width="1296" alt="スクリーンショット 2022-02-04 19 18 02" src="https://user-images.githubusercontent.com/62165727/152512119-295e25e0-cc81-4247-b939-5bcaa8d78189.png">




最終的にwebページとして実装を完了するまで至ることはできなかったが、必要最低限の実装を









# 資料
[最終プレゼンテーションスライド（発表用資料）](https://docs.google.com/presentation/d/1rdNYrq0WUOnIdI-mxJzm_W961YzSmf_J0hkL1oKQoCM/edit?usp=sharing)

[進捗管理用プロジェクト](https://github.com/furuhashilab/2021gsc_YosukeKanda/projects/1) 

# 参考文献リスト
https://docs.google.com/document/d/1JvmgYU16OdBb4MhckYtzOR80X1uyE8QwelUOa88r6Wc/edit?usp=sharing


# 中間発表
## Medium
[一都三県空き家率マップ（11月16日）](https://docs.google.com/presentation/d/1rdNYrq0WUOnIdI-mxJzm_W961YzSmf_J0hkL1oKQoCM/edit?usp=sharing)

## Qiitaアドベントカレンダー
[一都三県空き家率マップの作業進捗](https://qiita.com/cancancanda/items/53c191ee4914041cc172)


## 謝辞
本研究を進めるにあたり地球社会共生学部の古橋大地教授をはじめ多くの方々より多大な助言を賜りました。厚く感謝を申し上げます。
